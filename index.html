<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ë§Œë‹¤ë¼íŠ¸ ëª©í‘œ ì„¤ì • ë„êµ¬</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Gaegu', cursive;
    background-color: #f0fdf4;
}

.mandalart-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 10px;
}

/* ğŸ”¹ ê·¸ë¦¬ë“œ ê°„ê²© í™•ì¥ */
.mandalart-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    aspect-ratio: 1 / 1;
}

@media (min-width: 768px) {
    .mandalart-grid {
        gap: 18px;
    }
}

.sub-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4px;
    background-color: #e2e8f0;
    padding: 6px;
    border-radius: 10px;
}

.cell {
    aspect-ratio: 1 / 1;
    background-color: white;
    border-radius: 8px;
    border: 1px solid #cbd5e1;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ğŸ”¹ ì…ë ¥ ì˜ì—­ ì—¬ë°± í™•ì¥ */
.editable-area {
    width: 100%;
    height: 100%;
    padding: 6px;
    text-align: center;
    outline: none;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    word-break: break-word;
}

@media (min-width: 768px) {
    .editable-area {
        font-size: 1.2rem;
        padding: 10px;
    }
}

.editable-area:focus {
    background-color: #fffbeb;
}

.core-center {
    background-color: #fef08a !important;
    border: 2px solid #eab308 !important;
}

.core-sub {
    background-color: #fef9c3 !important;
    border: 1.5px solid #facc15 !important;
}

/* ğŸ”¹ í•œ ì¤„ ë‹¤ì§ */
.promise-box {
    display: flex;
    align-items: center;
    gap: 6px;
}

.promise-input {
    outline: none;
    min-width: 200px;
}

.promise-input:empty:before {
    content: "í•œ ì¤„ ë‹¤ì§ì„ ì ì–´ë³´ì„¸ìš”";
    color: #94a3b8;
}

/* ëª¨ë‹¬ */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background: white;
    padding: 20px;
    border-radius: 20px;
    max-width: 600px;
}
</style>
</head>

<body class="p-4">

<div class="mandalart-container">

<header class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
    <div>
        <h1 class="text-3xl font-bold text-green-800">ğŸ¯ ë§Œë‹¤ë¼íŠ¸ ê³„íší‘œ</h1>

        <!-- âœ… ì´ëª¨í‹°ì½˜ ê³ ì • + ì…ë ¥ ë¶„ë¦¬ -->
        <div class="promise-box text-green-700 mt-2 text-lg">
            <span>âœï¸</span>
            <div class="promise-input" contenteditable="true"></div>
        </div>
    </div>

    <div class="flex gap-2">
        <button onclick="openModal()" class="bg-yellow-400 px-5 py-2 rounded-full text-white font-bold">
            ğŸ’¡ ì˜ˆì‹œ ë³´ê¸°
        </button>
        <button onclick="window.print()" class="bg-green-600 px-5 py-2 rounded-full text-white font-bold">
            ì €ì¥/ì¸ì‡„
        </button>
    </div>
</header>

<div class="bg-white p-6 rounded-3xl shadow-xl border-4 border-green-100 mb-6">
    <div id="mandalartContainer" class="mandalart-grid"></div>
</div>

</div>

<!-- ëª¨ë‹¬ -->
<div id="exampleModal" class="modal" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <img src="https://github.com/mina1130/mandalart/blob/b1dba0bb12d7e500588d305148c820875d1009cd/mandalart.JPG?raw=true">
    </div>
</div>

<script>
const container = document.getElementById("mandalartContainer");
const modal = document.getElementById("exampleModal");

function createMandalart() {
    for (let b = 0; b < 9; b++) {
        const sub = document.createElement("div");
        sub.className = "sub-grid";

        for (let c = 0; c < 9; c++) {
            const cell = document.createElement("div");
            cell.className = "cell";

            if (b === 4 && c === 4) cell.classList.add("core-center");
            else if (b === 4 || c === 4) cell.classList.add("core-sub");

            const edit = document.createElement("div");
            edit.className = "editable-area";
            edit.contentEditable = true;
            edit.id = `cell-${b}-${c}`;

            edit.oninput = () => sync(b, c, edit.innerText);

            cell.appendChild(edit);
            sub.appendChild(cell);
        }
        container.appendChild(sub);
    }
}

function sync(b, c, val) {
    if (b === 4 && c !== 4) {
        document.getElementById(`cell-${c}-4`).innerText = val;
    }
    if (b !== 4 && c === 4) {
        document.getElementById(`cell-4-${b}`).innerText = val;
    }
}

function openModal() {
    modal.classList.add("show");
}

function closeModal(e) {
    if (!e || e.target === modal) modal.classList.remove("show");
}

createMandalart();
</script>

</body>
</html>
